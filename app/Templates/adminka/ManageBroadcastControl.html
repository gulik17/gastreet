{assign var=this value=$ManageBroadcastControl}

<h2>Менеджер уведомлений</h2>

{if $this.allTemplates}
<table class="table table-striped table-bordered table-hover" cellspacing="0" cellpadding="0">
    <tr>
        <th>ID</th>
        <th>Обновлено</th>
        <th>Статус</th>
        <th>Тип</th>
        <th>Назначение</th>
        <th>Шаблон</th>
        <th>Действия</th>
    </tr>
    {foreach item=tpl from=$this.allTemplates}
    {assign var=status value=$tpl->status}
    {assign var=editType value=$tpl->editType}
    {assign var=sendType value=$tpl->sendType}
    {assign var=triggerType value=$tpl->triggerType}
    <tr class="{cycle values='color,'}">
        <td>{$tpl->id}</td>
        <td>{if $tpl->tsUpdate}{$tpl->tsUpdate|dateformat:'d.m.Y, в H:i'}{else}-{/if}</td>
        <td>{$this.statusDesc.$status}</td>
        <td>{$this.sendTypeDesc.$sendType}</td>
        <td>{$this.triggerTypeDesc.$triggerType}</td>
        <td>{$tpl->message|htmltoplaintext|truncate:200:"...":true|nl2br}</td>
        <td>
            <a href="{alink show=editbroadcasttemplate id=$tpl->id}">Редактировать</a>
        </td>
    </tr>
    {/foreach}
</table>
{/if}
